info:
  name: Set DNS Configuration
  type: http
  seq: 11

http:
  method: POST
  url: "{{base_url}}/tailnet/{{tailnet}}/dns/configuration"
  auth:
    type: bearer
    token: "{{access_token}}"
  headers:
    - name: Content-Type
      value: application/json
  body:
    type: json
    data: |
      {
        "nameservers": ["8.8.8.8"],
        "magicDNS": true,
        "searchPaths": ["example.com"],
        "splitDns": {
          "corp.internal": ["10.0.0.1"]
        }
      }

settings:
  encodeUrl: true
  timeout: 0
  followRedirects: true
  maxRedirects: 5

docs: |
  # Set DNS Configuration

  Sets the complete DNS configuration for the tailnet in a single request (nameservers, MagicDNS, search paths, and split DNS).

  Use this instead of calling the individual DNS endpoints separately when you want to update everything at once.

  ## splitDns

  Maps domain suffixes to specific nameservers. Queries for those domains are sent only to the listed resolvers.
  Example: `"corp.internal": ["10.0.0.1"]` routes internal DNS to your on-prem resolver.

  ## Response

  Returns the full updated DNS configuration with 200 OK.
